<div>
    <!--<div class="panel panel-primary" style="margin-left: 2%;margin-right: 2%">-->
    <!--<div class="panel-heading">-->
    <!--<h3 class="panel-title text-center">Your Itinerary</h3>-->
    <!--</div>-->
    <!--<div class="panel-body">-->

    <!--</div>-->
    <!--</div>-->
    <nav>
        <ul class="pager">
            <li><a href="#">Previous</a></li>
            <li>26 March 2015</li>
            <li><a href="#">Next</a></li>
        </ul>
    </nav>
    <timeline>
        <timeline-node ng-if="currentDestination != null" side="right">
            <timeline-badge class="info"><img ng-src="images/{{getModeIcon(currentDestination.lastMajorSegment)}}.png" style="margin:auto; font-size: 2em; margin-top: 30%" class="img-responsive">
            </timeline-badge>
            <timeline-panel>
                <timeline-heading>
                    <timeline-title>{{getArrivalTitleText(currentDestination.lastMajorSegment)}}</timeline-title>
                    <p>
                        <small class="text-muted"><i class="glyphicon glyphicon-time"></i> {{currentDestination.arrivalTime | date:'shortTime'}}</small>
                    </p>
                </timeline-heading>
            </timeline-panel>
        </timeline-node>
        <timeline ng-repeat="dateItinerary in currentDestination.dateWiseItinerary" ng-init="parentIndex=$index">
            <timeline-node ng-if="currentDestination.hotelDetails != undefined && dateItinerary.dateWisePlaceData.typeOfDay == 0">
                <timeline-badge class="info"><i class="glyphicon glyphicon-home"></i>
                </timeline-badge>
                <timeline-panel>
                    <timeline-heading>
                        <timeline-title>{{currentDestination.hotelDetails.Name}}</timeline-title>
                        <div class="row">
                            <p>
                                <small class="text-muted" style="margin-left: 4%"> Single Room Rent Per Day {{currentDestination.hotelDetails.Price | currency:"&#8377;"}} </small>
                            </p>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <p>
                                    <small class="text-muted"><i class="glyphicon glyphicon-time"></i> {{getHotelEntryTime(dateItinerary.dateWisePlaceData, true) | date:'shortTime'}} - {{getHotelExitTime(dateItinerary.dateWisePlaceData, $index, true) | date:'shortTime'}} </small>
                                </p>
                            </div>
                            <div class="col-xs-6 text-right">
                                <p>
                                    <large> {{currentDestination.hotelDetails.pricePerPerson | currency:"&#8377;"}} per person</large>
                                </p>
                            </div>
                        </div>
                    </timeline-heading>
                </timeline-panel>
            </timeline-node>


            <timeline-node ng-repeat="permValue in dateItinerary.permutation track by $index" side="right" ng-drop="true" ng-drop-success="onDropComplete($data,$event, $index, $parent.$index)"  ng-drag="true" ng-drag-data="{isSwap: true, permutationIndex: $index, dateItineraryIndex: $parent.$index}" ng-drag-success="onDragComplete($data,$event)" ng-center-anchor="true" ng-drag-move="dragMove()">
                <timeline-badge class="info"><i class="glyphicon glyphicon-eye-open"></i>
                </timeline-badge>
                <timeline-panel style="border: dashed" ng-if="dateItinerary.dateWisePlaceData.placesData[permValue].isPlaceRemoved != undefined && dateItinerary.dateWisePlaceData.placesData[permValue].isPlaceRemoved == 1">
                    <timeline-heading>
                        <timeline-title class="col-xs-10">

                        </timeline-title>
                        <div class="col-xs-2" ng-click="removePlaceHolder(dateItinerary,$index,parentIndex)">
                            <i class="glyphicon glyphicon-remove"></i>
                        </div>
                    </timeline-heading>
                    <timeline-content class="text-center">
                        Drag Here To Add New Place</br></br>
                    </timeline-content>
                </timeline-panel>
                <timeline-panel ng-if="!(dateItinerary.dateWisePlaceData.placesData[permValue].isPlaceRemoved != undefined && dateItinerary.dateWisePlaceData.placesData[permValue].isPlaceRemoved == 1)">
                    <timeline-heading>
                        <div class="row">
                            <div class="col-xs-10">
                                <timeline-title>{{dateItinerary.dateWisePlaceData.placesData[permValue].Name}}</timeline-title>
                            </div>
                            <div ng-if="!dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming && (dateItinerary.dateWisePlaceData.placesData[permValue].hasWarning || !isPlaceTimingsCorrect(dateItinerary.dateWisePlaceData.placesData[permValue]))" class="col-xs-1" >
                                <i style="color: #901918" tooltip="{{dateItinerary.dateWisePlaceData.placesData[permValue].warningMessage}}" class="glyphicon glyphicon-exclamation-sign"></i>
                            </div>
                            <div class="col-xs-1" ng-if="dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming" ng-click="setUserTimings(dateItinerary,parentIndex,$index)">
                                <i style="color: #3f903f" class="glyphicon glyphicon-ok"></i>
                            </div>
                            <div ng-if="!dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming" class="col-xs-1" ng-click="removePlace(dateItinerary,parentIndex,$index)">
                                <i class="glyphicon glyphicon-remove"></i>
                            </div>
                            <div ng-if="dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming" class="col-xs-1" ng-click="disableChangeTimings(dateItinerary,$index)">
                                <i style="color: #c9302c" class="glyphicon glyphicon-remove"></i>
                            </div>
                            <div class="col-xs-1" ng-if="!dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming"></div>
                        </div>
                        <div class="row" ng-if="dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming">
                            <div class="text-center" style="font-size:small">
                                {{getTimeToPlaceText(dateItinerary, $index)}}
                            </div>

                            <div class="well" style="margin-top: 2%">
                                <div class="row">
                                    <timepicker class="col-xs-6" ng-model="dateItinerary.dateWisePlaceData.placesData[permValue].placeArrivalTimeClone" ng-change="changed()" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></timepicker>
                                    <timepicker class="col-xs-6" ng-model="dateItinerary.dateWisePlaceData.placesData[permValue].placeDepartureTimeClone" ng-change="changed()" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></timepicker>
                                    <div class="col-xs-6">
                                        Open - Close Time:
                                    </div>
                                    <div class="col-xs-6">
                                        <div ng-repeat="timing in dateItinerary.dateWisePlaceData.placesData[permValue].PlaceTimings">
                                            <div ng-if="isOnSameDay(dateItinerary.dateWisePlaceData.placesData[permValue].placeArrivalTime, timing.Days)">
                                                {{getDateFromString(timing.TimeStart, dateItinerary.dateWisePlaceData.placesData[permValue].placeArrivalTime) | date:'shortTime'}} - {{getDateFromString(timing.TimeEnd, dateItinerary.dateWisePlaceData.placesData[permValue].placeArrivalTime) | date:'shortTime'}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 text-center">
                                        <label class="checkbox" style="font-weight: normal;">
                                            <input type="checkbox" ng-model="isFixItinerary">
                                            Fix My Itinerary Accordingly
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="text-center" style="font-size:small">
                                {{getTimeFromPlaceText(dateItinerary, $index)}}
                            </div>

                        </div>
                        <div ng-if="!dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming" class="row">
                            <div class="col-xs-8">
                                <p>
                                    <small ng-click="enableChangeTimings(dateItinerary,$index)" class="text-muted"><i class="glyphicon glyphicon-time"></i> {{dateItinerary.dateWisePlaceData.placesData[permValue].placeArrivalTime | date:'shortTime'}} - {{dateItinerary.dateWisePlaceData.placesData[permValue].placeDepartureTime | date:'shortTime'}} </small>
                                </p>
                            </div>
                            <div ng-if="dateItinerary.dateWisePlaceData.placesData[permValue].AdultCharge > 0" class="col-xs-4 text-right">
                                <p>
                                    <large> {{dateItinerary.dateWisePlaceData.placesData[permValue].AdultCharge | currency:"&#8377;"}}</large>
                                </p>
                            </div>
                        </div>
                    </timeline-heading>

                    <timeline-content ng-if="!dateItinerary.dateWisePlaceData.placesData[permValue].isChangeTiming">
                        <div class="col-xs-6">
                            <img class="img-responsive" src="http://www.freeimages.com/assets/183333/1833326510/wood-weel-1444183-m.jpg">
                        </div>
                        <div class="col-xs-6 description-wrap">
                            <p>{{dateItinerary.dateWisePlaceData.placesData[permValue].Description}}</p>
                        </div>

                    </timeline-content>
                </timeline-panel>
            </timeline-node>

            <timeline-node ng-if="currentDestination.hotelDetails != undefined && !(dateItinerary.dateWisePlaceData.noPlacesVisited != undefined && dateItinerary.dateWisePlaceData.noPlacesVisited == 1)">
                <timeline-badge class="info"><i class="glyphicon glyphicon-home"></i>
                </timeline-badge>
                <timeline-panel>
                    <timeline-heading>
                        <timeline-title>{{currentDestination.hotelDetails.Name}}</timeline-title>
                        <div class="row">
                            <p>
                                <small class="text-muted" style="margin-left: 4%"> Single Room Rent Per Day {{currentDestination.hotelDetails.Price | currency:"&#8377;"}} </small>
                            </p>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <p>
                                    <small class="text-muted"><i class="glyphicon glyphicon-time"></i> {{getHotelEntryTime(dateItinerary.dateWisePlaceData) | date:'shortTime'}} - {{getHotelExitTime(dateItinerary.dateWisePlaceData, $index) | date:'shortTime'}} </small>
                                </p>
                            </div>
                            <div class="col-xs-6 text-right">
                                <p>
                                    <large> {{currentDestination.hotelDetails.pricePerPerson | currency:"&#8377;"}} per person</large>
                                </p>
                            </div>
                        </div>
                    </timeline-heading>
                </timeline-panel>
            </timeline-node>
        </timeline>

        <timeline-node ng-if="currentDestination != null" side="right">
            <timeline-badge class="info"><img ng-src="images/{{getModeIcon(currentDestination.firstMajorSegment)}}.png" style="margin:auto; font-size: 2em; margin-top: 30%" class="img-responsive">
            </timeline-badge>
            <timeline-panel>
                <timeline-heading>
                    <timeline-title>{{getDepartureTitleText(currentDestination.firstMajorSegment)}}</timeline-title>
                    <p>
                        <small class="text-muted"><i class="glyphicon glyphicon-time"></i> {{currentDestination.departureTime | date:'shortTime'}}</small>
                    </p>
                </timeline-heading>
            </timeline-panel>
        </timeline-node>
    </timeline>
</div>
